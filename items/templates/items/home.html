{% extends "items/base.html" %}
{% block title %}首页{% endblock %}
 
{% block content %}
<div class="jumbotron">
    <h1 class="display-4">欢迎来到物品复活平台</h1>
    <p class="lead">在这里，你可以让闲置物品找到新主人，或者找到你需要的宝贝</p>
    <hr class="my-4">
    <p>立即浏览最新发布的物品或发布你的闲置物品</p>
    <a class="btn btn-primary btn-lg" href="{% url 'item-list' %}" role="button">浏览物品</a>
    {% if user.is_authenticated %}
    <a class="btn btn-success btn-lg" href="{% url 'item-create' %}" role="button">发布物品</a>
    {% else %}
    <a class="btn btn-success btn-lg" href="{% url 'login' %}" role="button">登录发布</a>
    {% endif %}
</div>
 
<h2 class="mt-5 mb-3">最新物品</h2>
<div class="row">
    {% for item in items %}
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            {% if item.image %}
            <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}" style="height: 200px; object-fit: cover;">
            {% else %}
            <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
                <i class="bi bi-box-seam" style="font-size: 3rem;"></i>
            </div>
            {% endif %}
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ item.name }}</h5>
                <p class="card-text text-truncate">{{ item.description }}</p>
                <div class="mt-auto">
                    <span class="badge bg-{% if item.item_type == 'GIFT' %}success{% else %}warning{% endif %}">
                        {{ item.get_item_type_display }}
                    </span>
                    {% if item.item_type == 'SELL' and item.price %}
                    <span class="ms-2">¥{{ item.price }}</span>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer">
                <small class="text-muted">发布于 {{ item.created_at|date:"Y-m-d" }}</small>
                <a href="{% url 'item-detail' item.pk %}" class="btn btn-sm btn-outline-primary float-end">查看详情</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}